<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
 <head>
  <title> 滑动图片展示 </title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="generator" content="editplus">
  <meta name="author" content="IRD ShiCH">
  <meta name="keywords" content="slider,pic,show">
  <meta name="description" content="sliderPic webctrl example">

  <!-- ajax js 开始 -->
  <script language="javascript" src="../ajax.js"></script>
  <!-- ajax js 结束 -->

  <!-- pulic Css 开始 -->
  <link href="../public/css/pageInfo.css" type="text/css" rel="stylesheet" />
  <!-- pulic Css 结束 -->

  <script src="js/SliderPic.js" type="text/javascript"></script>
  <link href="css/SliderPic.css" type="text/css" rel="stylesheet" />
  <script language="javascript">
  <!--
    function init(){
        btCmd();
        //XML数据源
        buildXml();
        // JSON数据源
        //buildJson();
    }

    function btCmd(){
        var bts = document.getElementsByName("typeSelect");
        var value = "1";
        bts[0].onclick = bts[1].onclick = function(){
            this.blur();
            if(this.value != value){
                if(this.value == "1"){
                    buildXml();
                }else{
                    buildJson();
                }
                value = this.value;
            }
        }
    }

    function buildXml(){    
        var p = new ajax();
        //p.url = "data.xml";
        p.url = "../../service/sliderPicShow.asp";
        p.onresult = function(){
            var data = this.data.selectSingleNode(".//SliderPic");
            var div = document.getElementById("sliderCon");
            var slider = new SliderPic();
            slider.container = div;
            slider.data = data;
            slider.imgWidth = 250;
            slider.imgHeight = 250;
            slider.init(4);
            slider.clickEvt = function(elm){
                // do something here....
                alert("此图片的数据ID为:" + elm.getAttribute("dataID") + "\r\n数据源为XML对象");
            }
        }
        p.send();
    }

    function buildJson(){
        var str = "{1:{id:'111',src:'images/1.jpg'},2:{id:'123',src:'images/2.jpg'},3:{id:'124',src:'images/3.jpg'},4:{id:'125',src:'images/4.jpg'},5:{id:'126',src:'images/5.jpg'},6:{id:'127',src:'images/6.jpg'},7:{id:'128',src:'images/7.jpg'}}";
        eval("JSON="+str);
        var div = document.getElementById("sliderCon");
        var slider = new SliderPic();
        slider.dataType = 2;
        slider.container = div;
        slider.data = JSON;
        slider.imgWidth = 250;
        slider.imgHeight = 250;
        slider.init(3);
        slider.clickEvt = function(elm){
            // do something here....
            alert("此图片的数据ID为:" + elm.getAttribute("dataID") + "\r\n数据源为JSON对象");
        }
    }
    window.onload = init;
  //-->
  </script>
  <style type="text/css">
  body {
    margin:0px;
    padding:0px;
    background:#134363;
    text-align:center;
    width:100%;
    height:100%;
    overflow:hidden;
  }
  .banner {
      background:url(images/bg.jpg) repeat-x;
      height:22px;
      font:normal 12px Arial,宋体;
      color:#FFF;
      text-align:left;
      padding-left:10px;
      cursor:default;
  }
  </style>
 </head>

 <body scroll=no>
    <div class="banner">
        <input type=radio value=1 name=typeSelect checked/>XML数据
        <input type=radio value=2 name=typeSelect />JSON数据
    </div>
    <p>
    <!-- 控件容器 开始 -->
    <div id="sliderCon" style="width:645px;display:inline-block;"></div>
    <!-- 控件容器 结束 -->
 </body>
</html>
